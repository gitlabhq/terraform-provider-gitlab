---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "gitlab_project_environment Resource - terraform-provider-gitlab"
subcategory: ""
description: |-
  The gitlab_project_environment resource allows to manage the lifecycle of an environment in a project.
  -> During a terraform destroy this resource by default will not attempt to stop the environment first.
  An environment is required to be in a stopped state before a deletion of the environment can occur.
  Set the stop_before_destroy flag to attempt to automatically stop the environment before deletion. If the
  environment's auto_stop_setting is set to with_action, the environment will be force-stopped.
  Upstream API: GitLab REST API docs https://docs.gitlab.com/api/environments/
---

# gitlab_project_environment (Resource)

The `gitlab_project_environment` resource allows to manage the lifecycle of an environment in a project.

-> During a terraform destroy this resource by default will not attempt to stop the environment first.
An environment is required to be in a stopped state before a deletion of the environment can occur.
Set the `stop_before_destroy` flag to attempt to automatically stop the environment before deletion. If the 
environment's `auto_stop_setting` is set to `with_action`, the environment will be force-stopped. 

**Upstream API**: [GitLab REST API docs](https://docs.gitlab.com/api/environments/)

## Example Usage

```terraform
resource "gitlab_group" "this" {
  name        = "example"
  path        = "example"
  description = "An example group"
}

resource "gitlab_project" "this" {
  name                   = "example"
  namespace_id           = gitlab_group.this.id
  initialize_with_readme = true
}

resource "gitlab_project_environment" "this" {
  project      = gitlab_project.this.id
  name         = "example"
  external_url = "www.example.com"
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `name` (String) The name of the environment.
- `project` (String) The ID or full path of the project to environment is created for.

### Optional

- `auto_stop_setting` (String) The auto stop setting for the environment. Allowed values are `always`, `with_action`. If this is set to `with_action` and `stop_before_destroy` is `true`, the environment will be force-stopped.
- `cluster_agent_id` (Number) The cluster agent to associate with this environment.
- `description` (String) The description of the environment.
- `external_url` (String) Place to link to for this environment.
- `flux_resource_path` (String) The Flux resource path to associate with this environment.
- `kubernetes_namespace` (String) The Kubernetes namespace to associate with this environment.
- `stop_before_destroy` (Boolean) Determines whether the environment is attempted to be stopped before the environment is deleted. If `auto_stop_setting` is set to `with_action`, this will perform a force stop.
- `tier` (String) The tier of the new environment. Valid values are `production`, `staging`, `testing`, `development`, `other`.

### Read-Only

- `auto_stop_at` (String) The ISO8601 date/time that this environment will be automatically stopped at in UTC.
- `created_at` (String) The ISO8601 date/time that this environment was created at in UTC.
- `id` (String) The ID of this resource. In the format of `<project-id:environment-id>`
- `slug` (String) The name of the environment in lowercase, shortened to 63 bytes, and with everything except 0-9 and a-z replaced with -. No leading / trailing -. Use in URLs, host names and domain names.
- `state` (String) State the environment is in. Valid values are `available`, `stopped`.
- `updated_at` (String) The ISO8601 date/time that this environment was last updated at in UTC.

## Import

Starting in Terraform v1.5.0, you can use an [import block](https://developer.hashicorp.com/terraform/language/import) to import `gitlab_project_environment`. For example:

```terraform
import {
  to = gitlab_project_environment.example
  id = "see CLI command below for ID"
}
```

Importing using the CLI is supported with the following syntax:

```shell
# GitLab project environments can be imported using an id made up of `projectId:environmenId`, e.g.
terraform import gitlab_project_environment.bar 123:321
```
