---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "gitlab_project_pull_mirror Resource - terraform-provider-gitlab"
subcategory: ""
description: |-
  The gitlab_project_pull_mirror resource allows managing pull mirroring for GitLab projects.
  This resource uses the dedicated pull mirror API endpoint which provides reliable configuration of pull mirroring after project creation.
  Upstream API: GitLab REST API docs https://docs.gitlab.com/api/project_pull_mirroring/#configure-pull-mirroring-for-a-project
---

# gitlab_project_pull_mirror (Resource)

The `gitlab_project_pull_mirror` resource allows managing pull mirroring for GitLab projects.

This resource uses the dedicated pull mirror API endpoint which provides reliable configuration of pull mirroring after project creation.

**Upstream API**: [GitLab REST API docs](https://docs.gitlab.com/api/project_pull_mirroring/#configure-pull-mirroring-for-a-project)

## Example Usage

```terraform
# Basic pull mirror from GitHub
# Note: Unspecified options will use GitLab's defaults
resource "gitlab_project_pull_mirror" "github" {
  project       = gitlab_project.example.id
  url           = "https://github.com/example/repo.git"
  auth_user     = "github-username"
  auth_password = var.github_token
}

# Pull mirror with explicit options
# Only specify options you want to control; omit others to use GitLab defaults
resource "gitlab_project_pull_mirror" "advanced" {
  project                             = gitlab_project.example.id
  url                                 = "https://github.com/example/repo.git"
  enabled                             = true
  auth_user                           = "github-username"
  auth_password                       = var.github_token
  mirror_trigger_builds               = true
  only_mirror_protected_branches      = true
  mirror_overwrites_diverged_branches = false
}

# Pull mirror with branch regex (Premium/Ultimate)
resource "gitlab_project_pull_mirror" "regex" {
  project             = gitlab_project.example.id
  url                 = "https://github.com/example/repo.git"
  auth_user           = "github-username"
  auth_password       = var.github_token
  mirror_branch_regex = "^(main|develop|release/.*)$"
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `project` (String) The ID or URL-encoded path of the project owned by the authenticated user.
- `url` (String, Sensitive) The URL of the remote repository to mirror from. While the API call allows including username and password as basic authentication in the URL, this resourcedoes not for security and idempotency reasons. Use `auth_user` and `auth_password` instead.

### Optional

- `auth_password` (String, Sensitive) Authentication password or token for the remote repository.
- `auth_user` (String) Authentication username for the remote repository.
- `enabled` (Boolean) Enable or disable the pull mirror. Defaults to `true`.
- `mirror_branch_regex` (String) Regular expression for branches to mirror. Requires GitLab Premium or Ultimate. Cannot be used with `only_mirror_protected_branches`.
- `mirror_overwrites_diverged_branches` (Boolean) Overwrite diverged branches on the target project.
- `mirror_trigger_builds` (Boolean) Trigger CI/CD pipelines when the mirror updates.
- `only_mirror_protected_branches` (Boolean) Mirror only protected branches. Cannot be used with `mirror_branch_regex`.

### Read-Only

- `id` (String) The ID of this Terraform resource. In the format of `<project>`.
- `last_error` (String) Last error message from the mirror operation.
- `last_successful_update_at` (String) Timestamp of the last successful mirror update.
- `last_update_at` (String) Timestamp of the last mirror update attempt.
- `last_update_started_at` (String) Timestamp when the last mirror update started.
- `mirror_id` (Number) The ID of the pull mirror. This ID is set by GitLab.
- `update_status` (String) Current status of the mirror update.

## Import

Starting in Terraform v1.5.0, you can use an [import block](https://developer.hashicorp.com/terraform/language/import) to import `gitlab_project_pull_mirror`. For example:

```terraform
import {
  to = gitlab_project_pull_mirror.example
  id = "see CLI command below for ID"
}
```

Importing using the CLI is supported with the following syntax:

```shell
# Import using project ID
terraform import gitlab_project_pull_mirror.example 123

# Import using project path
# Note: Import is not supported for disabled mirrors because the GitLab API returns
# http 400 for disabled mirrors.
terraform import gitlab_project_pull_mirror.example "group/project"
```
