---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "gitlab_repository_file Resource - terraform-provider-gitlab"
subcategory: ""
description: |-
  The gitlab_repository_file resource allows to manage the lifecycle of a file within a repository.
  -> Timeouts Default timeout for Create, Update and Delete is one minute and can be configured in the timeouts block.
  -> Implementation Detail GitLab is unable to handle concurrent calls to the GitLab repository files API for the same project.
     Therefore, this resource queues every call to the repository files API no matter of the project, which may slow down the terraform
     execution time for some configurations. In addition, retries are performed in case a refresh is required because another application
     changed the repository at the same time.
  Upstream API: GitLab REST API docs https://docs.gitlab.com/ee/api/repository_files.html
---

# gitlab_repository_file (Resource)

The `gitlab_repository_file` resource allows to manage the lifecycle of a file within a repository.

-> **Timeouts** Default timeout for *Create*, *Update* and *Delete* is one minute and can be configured in the `timeouts` block.

-> **Implementation Detail** GitLab is unable to handle concurrent calls to the GitLab repository files API for the same project.
   Therefore, this resource queues every call to the repository files API no matter of the project, which may slow down the terraform
   execution time for some configurations. In addition, retries are performed in case a refresh is required because another application
   changed the repository at the same time.

**Upstream API**: [GitLab REST API docs](https://docs.gitlab.com/ee/api/repository_files.html)

## Example Usage

```terraform
resource "gitlab_group" "this" {
  name        = "example"
  path        = "example"
  description = "An example group"
}
resource "gitlab_project" "this" {
  name                   = "example"
  namespace_id           = gitlab_group.this.id
  initialize_with_readme = true
}
resource "gitlab_repository_file" "this" {
  project        = gitlab_project.this.id
  file_path      = "meow.txt"
  branch         = "main"
  content        = base64encode("Meow goes the cat")
  author_email   = "terraform@example.com"
  author_name    = "Terraform"
  commit_message = "feature: add meow file"
}

resource "gitlab_repository_file" "readme" {
  project   = gitlab_project.this.id
  file_path = "readme.txt"
  branch    = "main"
  // content will be auto base64 encoded
  content        = "Meow goes the cat"
  author_email   = "terraform@example.com"
  author_name    = "Terraform"
  commit_message = "feature: add readme file"
}

resource "gitlab_repository_file" "readme_for_dogs" {
  project        = gitlab_project.this.id
  file_path      = "readme.txt"
  branch         = "main"
  content        = "Bark goes the dog"
  author_email   = "terraform@example.com"
  author_name    = "Terraform"
  commit_message = "feature: update readme file"
  // file will be overwritten if it already exists and added to state
  overwrite_on_create = true
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `branch` (String) Name of the branch to which to commit to.
- `commit_message` (String) Commit message.
- `content` (String) File content. If the content is not yet base64 encoded, it will be encoded automatically. No other encoding is currently supported, because of a [GitLab API bug](https://gitlab.com/gitlab-org/gitlab/-/issues/342430).
- `file_path` (String) The full path of the file. It must be relative to the root of the project without a leading slash `/` or `./`.
- `project` (String) The name or ID of the project.

### Optional

- `author_email` (String) Email of the commit author.
- `author_name` (String) Name of the commit author.
- `encoding` (String) The file content encoding. Default value is `base64`. Valid values are: `base64`, `text`.
- `execute_filemode` (Boolean) Enables or disables the execute flag on the file. **Note**: requires GitLab 14.10 or newer.
- `overwrite_on_create` (Boolean) Enable overwriting existing files, defaults to `false`. This attribute is only used during `create` and must be use carefully. We suggest to use `imports` whenever possible and limit the use of this attribute for when the project was imported on the same `apply`. This attribute is not supported during a resource import.
- `start_branch` (String) Name of the branch to start the new commit from.
- `timeouts` (Block, Optional) (see [below for nested schema](#nestedblock--timeouts))

### Read-Only

- `blob_id` (String) The blob id.
- `commit_id` (String) The commit id.
- `content_sha256` (String) File content sha256 digest.
- `file_name` (String) The filename.
- `id` (String) The ID of this resource.
- `last_commit_id` (String) The last known commit id.
- `ref` (String) The name of branch, tag or commit.
- `size` (Number) The file size.

<a id="nestedblock--timeouts"></a>
### Nested Schema for `timeouts`

Optional:

- `create` (String)
- `delete` (String)
- `update` (String)

## Import

Import is supported using the following syntax:

```shell
# A Repository File can be imported using an id made up of `<project-id>:<branch-name>:<file-path>`, e.g.
terraform import gitlab_repository_file.this 1:main:foo/bar.txt
```
