---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "gitlab_project_mirror Resource - terraform-provider-gitlab"
subcategory: ""
description: |-
  The gitlab_project_mirror resource allows to manage the lifecycle of a project mirror.
  This is for pushing changes to a remote repository. Pull Mirroring can be configured using a combination of the
  import_url, mirror, and mirror_trigger_builds properties on the gitlab_project resource.
  -> Warning By default, the provider sets the keep_divergent_refs argument to True.
  If you manually set keep_divergent_refs to False, GitLab mirroring removes branches in the target that aren't in the source.
  This action can result in unexpected branch deletions.
  -> Destroy Behavior GitLab 14.10 introduced an API endpoint to delete a project mirror.
  Therefore, for GitLab 14.10 and newer the project mirror will be destroyed when the resource is destroyed.
  For older versions, the mirror will be disabled and the resource will be destroyed.
  Upstream API: GitLab REST API docs https://docs.gitlab.com/ee/api/remote_mirrors.html
---

# gitlab_project_mirror (Resource)

The `gitlab_project_mirror` resource allows to manage the lifecycle of a project mirror.

This is for *pushing* changes to a remote repository. *Pull Mirroring* can be configured using a combination of the
import_url, mirror, and mirror_trigger_builds properties on the gitlab_project resource.

-> **Warning** By default, the provider sets the `keep_divergent_refs` argument to `True`.
   If you manually set `keep_divergent_refs` to `False`, GitLab mirroring removes branches in the target that aren't in the source.
   This action can result in unexpected branch deletions.

-> **Destroy Behavior** GitLab 14.10 introduced an API endpoint to delete a project mirror.
   Therefore, for GitLab 14.10 and newer the project mirror will be destroyed when the resource is destroyed.
   For older versions, the mirror will be disabled and the resource will be destroyed.

**Upstream API**: [GitLab REST API docs](https://docs.gitlab.com/ee/api/remote_mirrors.html)

## Example Usage

```terraform
resource "gitlab_project_mirror" "foo" {
  project = "1"
  url     = "https://username:password@github.com/org/repository.git"
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `project` (String) The id of the project.
- `url` (String, Sensitive) The URL of the remote repository to be mirrored.

### Optional

- `enabled` (Boolean) Determines if the mirror is enabled.
- `keep_divergent_refs` (Boolean) Determines if divergent refs are skipped.
- `only_protected_branches` (Boolean) Determines if only protected branches are mirrored.

### Read-Only

- `id` (String) The ID of this resource.
- `mirror_id` (Number) Mirror ID.

## Import

Starting in Terraform v1.5.0 you can use an [import block](https://developer.hashicorp.com/terraform/language/import) to import `gitlab_project_mirror`. For example:
```terraform
import {
  to = gitlab_project_mirror.example
  id = "see CLI command below for ID"
}
```

Import using the CLI is supported using the following syntax:

```shell
# GitLab project mirror can be imported using an id made up of `project_id:mirror_id`, e.g.
terraform import gitlab_project_mirror.foo "12345:1337"
```
