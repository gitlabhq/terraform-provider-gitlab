---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "gitlab_project Resource - terraform-provider-gitlab"
subcategory: ""
description: |-
  The gitlab_project resource allows to manage the lifecycle of a project.
  A project can either be created in a group or user namespace.
  -> Default Branch Protection Workaround Projects are created with default branch protection.
  Since this default branch protection is not currently managed via Terraform, to workaround this limitation,
  you can remove the default branch protection via the API and create your desired Terraform managed branch protection.
  In the gitlab_project resource, define a local-exec provisioner which invokes
  the /projects/:id/protected_branches/:name API via curl to delete the branch protection on the default
  branch using a DELETE request. Then define the desired branch protection using the gitlab_branch_protection resource.
  Upstream API: GitLab REST API docs https://docs.gitlab.com/ce/api/projects/
---

# gitlab_project (Resource)

The `gitlab_project` resource allows to manage the lifecycle of a project.

A project can either be created in a group or user namespace.

-> **Default Branch Protection Workaround** Projects are created with default branch protection.
Since this default branch protection is not currently managed via Terraform, to workaround this limitation,
you can remove the default branch protection via the API and create your desired Terraform managed branch protection.
In the `gitlab_project` resource, define a `local-exec` provisioner which invokes
the `/projects/:id/protected_branches/:name` API via curl to delete the branch protection on the default
branch using a `DELETE` request. Then define the desired branch protection using the `gitlab_branch_protection` resource.

**Upstream API**: [GitLab REST API docs](https://docs.gitlab.com/ce/api/projects/)

## Example Usage

```terraform
resource "gitlab_project" "example" {
  name        = "example"
  description = "My awesome codebase"

  visibility_level = "public"
}

# Project with custom push rules
resource "gitlab_project" "example-two" {
  name = "example-two"

  push_rules {
    author_email_regex     = "@example\\.com$"
    commit_committer_check = true
    member_check           = true
    prevent_secrets        = true
  }
}

# Create a project for a given user (requires admin access)
data "gitlab_user" "peter_parker" {
  username = "peter_parker"
}

resource "gitlab_project" "peters_repo" {
  name         = "peters-repo"
  description  = "This is a description"
  namespace_id = data.gitlab_user.peter_parker.namespace_id
}

# Fork a project
resource "gitlab_project" "fork" {
  name                   = "my-fork"
  description            = "This is a fork"
  forked_from_project_id = gitlab_project.example.id
}

# Fork a project and setup a pull mirror
resource "gitlab_project" "fork" {
  name                   = "my-fork"
  description            = "This is a fork"
  forked_from_project_id = gitlab_project.example.id
  import_url             = gitlab_project.example.http_url_to_repo
  mirror                 = true
}

# Create a project by importing it from a public project
resource "gitlab_project" "import_public" {
  name       = "import-from-public-project"
  import_url = "https://gitlab.example.com/repo.git"
}

# Create a project by importing it from a public project and setup the pull mirror
resource "gitlab_project" "import_public_with_mirror" {
  name       = "import-from-public-project"
  import_url = "https://gitlab.example.com/repo.git"
  mirror     = true
}

# Create a project by importing it from a private project
resource "gitlab_project" "import_private" {
  name                = "import-from-public-project"
  import_url          = "https://gitlab.example.com/repo.git"
  import_url_username = "user"
  import_url_password = "pass"
}

# Create a project by importing it from a private project and setup the pull mirror
resource "gitlab_project" "import_private_with_mirror" {
  name                = "import-from-public-project"
  import_url          = "https://gitlab.example.com/repo.git"
  import_url_username = "user"
  import_url_password = "pass"
  mirror              = true
}

# Create a project by importing it from a private project and provide credentials in `import_url`
# NOTE: only use this if you really must, use `import_url_username` and `import_url_password` whenever possible
#       GitLab API will always return the `import_url` without credentials, therefore you must ignore the `import_url` for changes:
resource "gitlab_project" "import_private" {
  name       = "import-from-public-project"
  import_url = "https://user:pass@gitlab.example.com/repo.git"

  lifecycle {
    ignore_changes = [
      import_url
    ]
  }
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `name` (String) The name of the project.

### Optional

- `allow_merge_on_skipped_pipeline` (Boolean) Set to true if you want to treat skipped pipelines as if they finished with success.
- `allow_pipeline_trigger_approve_deployment` (Boolean) Set whether or not a pipeline triggerer is allowed to approve deployments. Premium and Ultimate only.
- `analytics_access_level` (String) Set the analytics access level. Valid values are `disabled`, `private`, `enabled`.
- `approvals_before_merge` (Number, Deprecated) Number of merge request approvals required for merging. Default is 0. This field **does not** work well in combination with the `gitlab_project_approval_rule` resource. We recommend you do not use this deprecated field and use `gitlab_project_approval_rule` instead. To be removed in 19.0.
- `archive_on_destroy` (Boolean) Set to `true` to archive the project instead of deleting on destroy. If set to `true` it will entire omit the `DELETE` operation.
- `archived` (Boolean) Whether the project is in read-only mode (archived). Repositories can be archived/unarchived by toggling this parameter.
- `auto_cancel_pending_pipelines` (String) Auto-cancel pending pipelines. This isnâ€™t a boolean, but enabled/disabled.
- `auto_devops_deploy_strategy` (String) Auto Deploy strategy. Valid values are `continuous`, `manual`, `timed_incremental`.
- `auto_devops_enabled` (Boolean) Enable Auto DevOps for this project.
- `auto_duo_code_review_enabled` (Boolean) Enable automatic reviews by GitLab Duo on merge requests. Ultimate only. Automatic reviews only work with the GitLab Duo Enterprise add-on.
- `autoclose_referenced_issues` (Boolean) Set whether auto-closing referenced issues on default branch.
- `avatar` (String) A local path to the avatar image to upload. **Note**: not available for imported resources.
- `avatar_hash` (String) The hash of the avatar image. Use `filesha256("path/to/avatar.png")` whenever possible. **Note**: this is used to trigger an update of the avatar. If it's not given, but an avatar is given, the avatar will be updated each time.
- `branches` (String) Branches to fork (empty for all branches).
- `build_git_strategy` (String) The Git strategy. Defaults to fetch. Valid values are `clone`, `fetch`.
- `build_timeout` (Number) The maximum amount of time, in seconds, that a job can run.
- `builds_access_level` (String) Set the builds access level. Valid values are `disabled`, `private`, `enabled`.
- `ci_config_path` (String) Custom Path to CI config file.
- `ci_default_git_depth` (Number) Default number of revisions for shallow cloning.
- `ci_delete_pipelines_in_seconds` (Number) Pipelines older than the configured time are deleted.
- `ci_forward_deployment_enabled` (Boolean) When a new deployment job starts, skip older deployment jobs that are still pending.
- `ci_forward_deployment_rollback_allowed` (Boolean) Allow job retries even if the deployment job is outdated.
- `ci_id_token_sub_claim_components` (List of String) Fields included in the sub claim of the ID Token. Accepts an array starting with project_path. The array might also include ref_type and ref. Defaults to ["project_path", "ref_type", "ref"]. Introduced in GitLab 17.10.
- `ci_pipeline_variables_minimum_override_role` (String) The minimum role required to set variables when running pipelines and jobs. Introduced in GitLab 17.1. Valid values are `developer`, `maintainer`, `owner`, `no_one_allowed`
- `ci_push_repository_for_job_token_allowed` (Boolean) Allow Git push requests to your project repository that are authenticated with a CI/CD job token.
- `ci_restrict_pipeline_cancellation_role` (String) The role required to cancel a pipeline or job. Premium and Ultimate only. Valid values are `developer`, `maintainer`, `no one`
- `ci_separated_caches` (Boolean) Use separate caches for protected branches.
- `container_expiration_policy` (Block List, Max: 1) Set the image cleanup policy for this project. **Note**: this field is sometimes named `container_expiration_policy_attributes` in the GitLab Upstream API. (see [below for nested schema](#nestedblock--container_expiration_policy))
- `container_registry_access_level` (String) Set visibility of container registry, for this project. Valid values are `disabled`, `private`, `enabled`.
- `container_registry_enabled` (Boolean, Deprecated) Enable container registry for the project. Use `container_registry_access_level` instead. To be removed in 19.0.
- `default_branch` (String) The default branch for the project.
- `description` (String) A description of the project.
- `emails_enabled` (Boolean) Enable email notifications.
- `environments_access_level` (String) Set the environments access level. Valid values are `disabled`, `private`, `enabled`.
- `external_authorization_classification_label` (String) The classification label for the project.
- `feature_flags_access_level` (String) Set the feature flags access level. Valid values are `disabled`, `private`, `enabled`.
- `forked_from_project_id` (Number) The id of the project to fork. During create the project is forked and during an update the fork relation is changed.
- `forking_access_level` (String) Set the forking access level. Valid values are `disabled`, `private`, `enabled`.
- `group_runners_enabled` (Boolean) Enable group runners for this project.
- `group_with_project_templates_id` (Number) For group-level custom templates, specifies ID of group from which all the custom project templates are sourced. Leave empty for instance-level templates. Requires use_custom_template to be true (enterprise edition).
- `import_url` (String) Git URL to a repository to be imported. Together with `mirror = true` it will setup a Pull Mirror. This can also be used together with `forked_from_project_id` to setup a Pull Mirror for a fork. The fork takes precedence over the import. Make sure to provide the credentials in `import_url_username` and `import_url_password`. GitLab never returns the credentials, thus the provider cannot detect configuration drift in the credentials. They can also not be imported using `terraform import`. See the examples section for how to properly use it.
- `import_url_password` (String, Sensitive) The password for the `import_url`. The value of this field is used to construct a valid `import_url` and is only related to the provider. This field cannot be imported using `terraform import`. See the examples section for how to properly use it.
- `import_url_username` (String) The username for the `import_url`. The value of this field is used to construct a valid `import_url` and is only related to the provider. This field cannot be imported using `terraform import`.  See the examples section for how to properly use it.
- `infrastructure_access_level` (String) Set the infrastructure access level. Valid values are `disabled`, `private`, `enabled`.
- `initialize_with_readme` (Boolean) Create main branch with first commit containing a README.md file. Must be set to `true` if importing an uninitialized project with a different `default_branch`.
- `issues_access_level` (String) Set the issues access level. Valid values are `disabled`, `private`, `enabled`.
- `issues_enabled` (Boolean, Deprecated) Enable issue tracking for the project. Use `issues_access_level` instead. To be removed in 19.0.
- `issues_template` (String) Sets the template for new issues in the project.
- `keep_latest_artifact` (Boolean) Disable or enable the ability to keep the latest artifact for this project.
- `lfs_enabled` (Boolean) Enable LFS for the project.
- `merge_commit_template` (String) Template used to create merge commit message in merge requests.
- `merge_method` (String) Set the merge method. Valid values are `merge`, `rebase_merge`, `ff`.
- `merge_pipelines_enabled` (Boolean) Enable or disable merge pipelines.
- `merge_requests_access_level` (String) Set the merge requests access level. Valid values are `disabled`, `private`, `enabled`.
- `merge_requests_enabled` (Boolean, Deprecated) Enable merge requests for the project. Use `merge_requests_access_level` instead. To be removed in 19.0.
- `merge_requests_template` (String) Sets the template for new merge requests in the project.
- `merge_trains_enabled` (Boolean) Enable or disable merge trains. Requires `merge_pipelines_enabled` to be set to `true` to take effect.
- `mirror` (Boolean) Enable project pull mirror.
- `mirror_overwrites_diverged_branches` (Boolean) Enable overwrite diverged branches for a mirrored project.
- `mirror_trigger_builds` (Boolean) Enable trigger builds on pushes for a mirrored project.
- `model_experiments_access_level` (String) Set visibility of machine learning model experiments. Valid values are `disabled`, `private`, `enabled`.
- `model_registry_access_level` (String) Set visibility of machine learning model registry. Valid values are `disabled`, `private`, `enabled`.
- `monitor_access_level` (String) Set the monitor access level. Valid values are `disabled`, `private`, `enabled`.
- `mr_default_target_self` (Boolean) For forked projects, target merge requests to this project. If false, the target will be the upstream project.
- `namespace_id` (Number) The namespace (group or user) of the project. Defaults to your user.
- `only_allow_merge_if_all_discussions_are_resolved` (Boolean) Set to true if you want allow merges only if all discussions are resolved.
- `only_allow_merge_if_pipeline_succeeds` (Boolean) Set to true if you want allow merges only if a pipeline succeeds.
- `only_mirror_protected_branches` (Boolean) Enable only mirror protected branches for a mirrored project.
- `packages_enabled` (Boolean) Enable packages repository for the project.
- `pages_access_level` (String) Enable pages access control. Valid values are `public`, `private`, `enabled`, `disabled`.
- `path` (String) The path of the repository.
- `permanently_delete_on_destroy` (Boolean) Set to `true` to immediately permanently delete the project instead of scheduling a delete for Premium and Ultimate tiers.
- `pipelines_enabled` (Boolean, Deprecated) Enable pipelines for the project. The `pipelines_enabled` field is being sent as `jobs_enabled` in the GitLab API calls. Use `builds_access_level` instead. To be removed in 19.0.
- `pre_receive_secret_detection_enabled` (Boolean) Whether Secret Push Detection is enabled. Requires GitLab Ultimate.
- `prevent_merge_without_jira_issue` (Boolean) Set whether merge requests require an associated issue from Jira. Premium and Ultimate only.
- `printing_merge_request_link_enabled` (Boolean) Show link to create/view merge request when pushing from the command line
- `public_builds` (Boolean, Deprecated) If true, jobs can be viewed by non-project members.
- `public_jobs` (Boolean) If true, jobs can be viewed by non-project members.
- `push_rules` (Block List, Max: 1) Push rules for the project. (see [below for nested schema](#nestedblock--push_rules))
- `releases_access_level` (String) Set the releases access level. Valid values are `disabled`, `private`, `enabled`.
- `remove_source_branch_after_merge` (Boolean) Enable `Delete source branch` option by default for all new merge requests.
- `repository_access_level` (String) Set the repository access level. Valid values are `disabled`, `private`, `enabled`.
- `repository_storage` (String) Which storage shard the repository is on. (administrator only)
- `request_access_enabled` (Boolean) Allow users to request member access.
- `requirements_access_level` (String) Set the requirements access level. Valid values are `disabled`, `private`, `enabled`.
- `resolve_outdated_diff_discussions` (Boolean) Automatically resolve merge request diffs discussions on lines changed with a push.
- `resource_group_default_process_mode` (String) The default resource group process mode for the project.
- `restrict_user_defined_variables` (Boolean, Deprecated) Allow only users with the Maintainer role to pass user-defined variables when triggering a pipeline. Use `ci_pipeline_variables_minimum_override_role` instead. To be removed in 19.0.
- `security_and_compliance_access_level` (String) Set the security and compliance access level. Valid values are `disabled`, `private`, `enabled`.
- `shared_runners_enabled` (Boolean) Enable shared runners for this project.
- `skip_wait_for_default_branch_protection` (Boolean) If `true`, the default behavior to wait for the default branch protection to be created is skipped.
This is necessary if the current user is not an admin and the default branch protection is disabled on an instance-level.
There is currently no known way to determine if the default branch protection is disabled on an instance-level for non-admin users.
This attribute is only used during resource creation, thus changes are suppressed and the attribute cannot be imported.
- `snippets_access_level` (String) Set the snippets access level. Valid values are `disabled`, `private`, `enabled`.
- `snippets_enabled` (Boolean, Deprecated) Enable snippets for the project. Use `snippets_access_level` instead. To be removed in 19.0.
- `squash_commit_template` (String) Template used to create squash commit message in merge requests.
- `squash_option` (String) Squash commits when merge request is merged. Valid values are `never` (Do not allow), `always` (Require), `default_on` (Encourage), or `default_off` (Allow). The default value is `default_off` (Allow).
- `suggestion_commit_message` (String) The commit message used to apply merge request suggestions.
- `tags` (Set of String, Deprecated) The list of tags for a project; put array of tags, that should be finally assigned to a project. Use `topics` instead. To be removed in 19.0.
- `template_name` (String) When used without use_custom_template, name of a built-in project template. When used with use_custom_template, name of a custom project template. This option is mutually exclusive with `template_project_id`.
- `template_project_id` (Number) When used with use_custom_template, project ID of a custom project template. This is preferable to using template_name since template_name may be ambiguous (enterprise edition). This option is mutually exclusive with `template_name`. See `gitlab_group_project_file_template` to set a project as a template project. If a project has not been set as a template, using it here will result in an error.
- `timeouts` (Block, Optional) (see [below for nested schema](#nestedblock--timeouts))
- `topics` (Set of String) The list of topics for the project.
- `use_custom_template` (Boolean) Use either custom instance or group (with group_with_project_templates_id) project template (enterprise edition).
		~> When using a custom template, [Group Tokens won't work](https://docs.gitlab.com/15.7/ee/user/project/settings/import_export_troubleshooting/#import-using-the-rest-api-fails-when-using-a-group-access-token). You must use a real user's Personal Access Token.
- `visibility_level` (String) Set to `public` to create a public project. Valid values are `private`, `internal`, `public`.
- `wiki_access_level` (String) Set the wiki access level. Valid values are `disabled`, `private`, `enabled`.
- `wiki_enabled` (Boolean, Deprecated) Enable wiki for the project. Use `wiki_access_level` instead. To be removed in 19.0.

### Read-Only

- `avatar_url` (String) The URL of the avatar image.
- `empty_repo` (Boolean) Whether the project is empty.
- `http_url_to_repo` (String) URL that can be provided to `git clone` to clone the
- `id` (String) The ID of this resource.
- `path_with_namespace` (String) The path of the repository with namespace.
- `runners_token` (String, Sensitive) Registration token to use during runner setup.
- `ssh_url_to_repo` (String) URL that can be provided to `git clone` to clone the
- `web_url` (String) URL that can be used to find the project in a browser.

<a id="nestedblock--container_expiration_policy"></a>
### Nested Schema for `container_expiration_policy`

Optional:

- `cadence` (String) The cadence of the policy. Valid values are: `1d`, `7d`, `14d`, `1month`, `3month`.
- `enabled` (Boolean) If true, the policy is enabled.
- `keep_n` (Number) The number of images to keep.
- `name_regex_delete` (String) The regular expression to match image names to delete.
- `name_regex_keep` (String) The regular expression to match image names to keep.
- `older_than` (String) The number of days to keep images.

Read-Only:

- `next_run_at` (String) The next time the policy will run.


<a id="nestedblock--push_rules"></a>
### Nested Schema for `push_rules`

Optional:

- `author_email_regex` (String) All commit author emails must match this regex, e.g. `@my-company.com$`.
- `branch_name_regex` (String) All branch names must match this regex, e.g. `(feature|hotfix)\/*`.
- `commit_committer_check` (Boolean) Users can only push commits to this repository that were committed with one of their own verified emails.
- `commit_committer_name_check` (Boolean) Users can only push commits to this repository if the commit author name is consistent with their GitLab account name.
- `commit_message_negative_regex` (String) No commit message is allowed to match this regex, e.g. `ssh\:\/\/`.
- `commit_message_regex` (String) All commit messages must match this regex, e.g. `Fixed \d+\..*`.
- `deny_delete_tag` (Boolean) Deny deleting a tag.
- `file_name_regex` (String) All committed filenames must not match this regex, e.g. `(jar|exe)$`.
- `max_file_size` (Number) Maximum file size (MB).
- `member_check` (Boolean) Restrict commits by author (email) to existing GitLab users.
- `prevent_secrets` (Boolean) GitLab will reject any files that are likely to contain secrets.
- `reject_non_dco_commits` (Boolean) Reject commit when itâ€™s not DCO certified.
- `reject_unsigned_commits` (Boolean) Reject commit when itâ€™s not signed through GPG.


<a id="nestedblock--timeouts"></a>
### Nested Schema for `timeouts`

Optional:

- `create` (String)
- `delete` (String)

## Import

Starting in Terraform v1.5.0, you can use an [import block](https://developer.hashicorp.com/terraform/language/import) to import `gitlab_project`. For example:

```terraform
import {
  to = gitlab_project.example
  id = "see CLI command below for ID"
}
```

Importing using the CLI is supported with the following syntax:

```shell
# You can import a project state using `terraform import <resource> <id>`.  The
# `id` can be whatever the [get single project api][get_single_project] takes for
# its `:id` value, so for example:
terraform import gitlab_project.example richardc/example

# NOTE: the `import_url_username` and `import_url_password` cannot be imported.
```
