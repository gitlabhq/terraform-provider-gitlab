---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "gitlab_user_avatar Resource - terraform-provider-gitlab"
subcategory: ""
description: |-
  The gitlab_user_avatar resource allows users to manage the lifecycle of a user avatar.
  The resource can also be used to set the avatar on project or group access tokens, as well as on service accounts.
  ~> The token attribute is optional only when the GitLab token used by the provider has an administrator scope, as this allows an administrator to manage user avatars.
  ~> The provided token must have the api scope in order to set the avatar.
  Upstream API: GitLab API docs https://docs.gitlab.com/api/users/#upload-an-avatar-for-yourself
---

# gitlab_user_avatar (Resource)

The `gitlab_user_avatar` resource allows users to manage the lifecycle of a user avatar.
The resource can also be used to set the avatar on project or group access tokens, as well as on service accounts.

~> The `token` attribute is optional only when the GitLab token used by the provider has an administrator scope, as this allows an administrator to manage user avatars.

~> The provided `token` must have the `api` scope in order to set the avatar.

**Upstream API**: [GitLab API docs](https://docs.gitlab.com/api/users/#upload-an-avatar-for-yourself)

## Example Usage

```terraform
resource "gitlab_personal_access_token" "example" {
  user_id    = "25"
  name       = "Example personal access token"
  expires_at = "2020-03-14"

  scopes = ["api"]
}

resource "gitlab_user_avatar" "example" {
  user_id     = gitlab_personal_access_token.example.user_id
  token       = gitlab_personal_access_token.example.token
  avatar      = "${path.module}/avatar.png"
  avatar_hash = filesha256("${path.module}/avatar.png")
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `avatar` (String) A local path to the avatar image to upload. **Note**: the avatar is not available for imported resources.
- `user_id` (Number) The ID of the user.

### Optional

- `avatar_hash` (String) The hash of the avatar image.  This is used to track changes to the avatar image if the image contents change but the image name remains the same. Use `filesha256("path/to/avatar.png")` whenever possible.
- `token` (String, Sensitive) The access token of the user. If this field is omitted, a GitLab token with administrator scope is required to manage the avatar for the specified user. **Note**: the token is not available for imported resources.

### Read-Only

- `avatar_url` (String) The URL of the avatar image.
- `id` (String) The ID of the user avatar resource.  It will always be equal to the `user_id`.

## Import

Starting in Terraform v1.5.0, you can use an [import block](https://developer.hashicorp.com/terraform/language/import) to import `gitlab_user_avatar`. For example:

```terraform
import {
  to = gitlab_user_avatar.example
  id = "see CLI command below for ID"
}
```

Importing using the CLI is supported with the following syntax:

```shell
# A GitLab User Avatar can be imported using the user id, e.g.
terraform import gitlab_user_avatar.example "12345"

# NOTE: the `token` and `avatar` resource attributes are not available for imported resources as this information cannot be read from the GitLab API.
```
