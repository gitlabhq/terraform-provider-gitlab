---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "gitlab_project_security_policy_attachment Resource - terraform-provider-gitlab"
subcategory: ""
description: |-
  The gitlab_project_security_policy_attachment resource allows to attach a security policy project to a project.
  ~> Policies https://docs.gitlab.com/user/application_security/policies/ are files stored in a policy project as raw YAML, to allow maximum flexibility with support of all kind of policy and all their options. See the examples for how to create a policy project, add a policy, and link it. Use the gitlab_repository_file resource to create policies instead of a specific policy resource. This ensures all policy options are immediately via Terraform once released.
  Upstream API: GitLab GraphQL API docs https://docs.gitlab.com/api/graphql/reference/index/#mutationsecuritypolicyprojectassign
---

# gitlab_project_security_policy_attachment (Resource)

The `gitlab_project_security_policy_attachment` resource allows to attach a security policy project to a project.

~> [Policies](https://docs.gitlab.com/user/application_security/policies/) are files stored in a policy project as raw YAML, to allow maximum flexibility with support of all kind of policy and all their options. See the examples for how to create a policy project, add a policy, and link it. Use the `gitlab_repository_file` resource to create policies instead of a specific policy resource. This ensures all policy options are immediately via Terraform once released.

**Upstream API**: [GitLab GraphQL API docs](https://docs.gitlab.com/api/graphql/reference/index/#mutationsecuritypolicyprojectassign)

## Example Usage

```terraform
# This resource can be used to attach a security policy to a pre-existing project
resource "gitlab_project_security_policy_attachment" "foo" {
  project        = 1234
  policy_project = 4567
}


# Or Terraform can create a new project, add a policy to that project,
# then attach that policy project to other projects.
resource "gitlab_project" "my-policy-project" {
  name = "security-policy-project"
}

resource "gitlab_repository_file" "policy-yml" {
  project   = gitlab_project.my-policy-project.id
  file_path = ".gitlab/security-policies/my-policy.yml"
  branch    = "master"
  encoding  = "text"
  content   = <<-EOT
---
approval_policy:
- name: test
description: test
enabled: true
rules:
- type: any_merge_request
    branch_type: protected
    commits: any
approval_settings:
    block_branch_modification: true
    prevent_pushing_and_force_pushing: true
    prevent_approval_by_author: true
    prevent_approval_by_commit_author: true
    remove_approvals_with_new_commit: true
    require_password_to_approve: false
fallback_behavior:
    fail: closed
actions:
- type: send_bot_message
    enabled: true
EOT
}

# Multiple policies can be attached to a single project by repeating this resource or using a `for_each`
resource "gitlab_project_security_policy_attachment" "my-policy" {
  project        = 1234
  policy_project = gitlab_project.my-policy-project.id
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `policy_project` (String) The ID or Full Path of the security policy project.
- `project` (String) The ID or Full Path of the project which will have the security policy project assigned to it.

### Read-Only

- `id` (String) The ID of this Terraform resource. In the format of `<project>:<policy_project>`.
- `policy_project_graphql_id` (String) The GraphQL ID of the security policy project.
- `project_graphql_id` (String) The GraphQL ID of the project to which the security policty project will be attached.

## Import

Starting in Terraform v1.5.0, you can use an [import block](https://developer.hashicorp.com/terraform/language/import) to import `gitlab_project_security_policy_attachment`. For example:

```terraform
import {
  to = gitlab_project_security_policy_attachment.example
  id = "see CLI command below for ID"
}
```

Importing using the CLI is supported with the following syntax:

```shell
# GitLab project security policy attachments can be imported using an id made up of `project:policy_project_id` where the policy project ID is the project ID of the policy project, e.g.
terraform import gitlab_project_security_policy_attachment.foo 1:2
```
