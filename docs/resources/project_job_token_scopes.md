---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "gitlab_project_job_token_scopes Resource - terraform-provider-gitlab"
subcategory: ""
description: |-
  The gitlab_project_job_token_scopes resource allows to manage the CI/CD Job Token scopes in a project.
  Any project or group not within the defined set of target_project_ids or target_group_ids, respectively, will be removed,
  which allows this resource to be used as an explicit deny.
  ~> Conflicts with the use of gitlab_project_job_token_scope when used on the same project. Use one or the other to ensure the desired state.
  ~> If the enabled property is false, any project or group will be allowed regardless of the given allowlist attributes.
  Upstream API: GitLab REST API docs https://docs.gitlab.com/api/project_job_token_scopes/
---

# gitlab_project_job_token_scopes (Resource)

The `gitlab_project_job_token_scopes` resource allows to manage the CI/CD Job Token scopes in a project.
Any project or group not within the defined set of `target_project_ids` or `target_group_ids`, respectively, will be removed,
which allows this resource to be used as an explicit deny.

~> Conflicts with the use of `gitlab_project_job_token_scope` when used on the same project. Use one or the other to ensure the desired state.

~> If the `enabled` property is false, any project or group will be allowed regardless of the given allowlist attributes.

**Upstream API**: [GitLab REST API docs](https://docs.gitlab.com/api/project_job_token_scopes/)

## Example Usage

```terraform
resource "gitlab_project_job_token_scopes" "allowed_single_project" {
  project            = "111"
  target_project_ids = [123]
}

resource "gitlab_project_job_token_scopes" "allowed_multiple_project" {
  project            = "111"
  target_project_ids = [123, 456, 789]
}

resource "gitlab_project_job_token_scopes" "allowed_multiple_groups" {
  project_id         = 111
  target_project_ids = []
  target_group_ids   = [321, 654]
}

# This will remove all job token scopes, even if added outside of TF.
resource "gitlab_project_job_token_scopes" "explicit_deny" {
  project            = "111"
  target_project_ids = []
}

# This shows the explicit behavior of the enabled flag with a list of projects and groups.
resource "gitlab_project_job_token_scopes" "allow_projects_and_groups" {
  project            = "111"
  enabled            = true
  target_project_ids = [123, 456, 789]
  target_group_ids   = [321, 654]
}

# This allows all projects and groups (disabling the CI Job Token scope protection)
resource "gitlab_project_job_token_scopes" "allow_all" {
  project = "111"
  enabled = false
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Optional

- `enabled` (Boolean) Enable the given inbound allowlist. If false, will allow any project or group regardless of the values in `target_project_ids` or `target_group_ids`. Deleting the associated `gitlab_project_job_token_scopes` resource will reset `Enabled` on the group to `true`.
- `project` (String) The ID or full path of the project.
- `project_id` (Number, Deprecated) The ID of the project.
- `target_group_ids` (Set of Number) A set of group IDs that are in the CI/CD job token inbound allowlist.
- `target_project_ids` (Set of Number) A set of project IDs that are in the CI/CD job token inbound allowlist.

### Read-Only

- `id` (String) The ID of this Terraform resource. In the format of `<project_id>`.

## Import

Starting in Terraform v1.5.0 you can use an [import block](https://developer.hashicorp.com/terraform/language/import) to import `gitlab_project_job_token_scopes`. For example:
```terraform
import {
  to = gitlab_project_job_token_scopes.example
  id = "see CLI command below for ID"
}
```

Import using the CLI is supported using the following syntax:

```shell
# GitLab project job token scopes can be imported using an id made up of just the `project_id`
terraform import gitlab_project_job_token_scopes.bar 123
```
