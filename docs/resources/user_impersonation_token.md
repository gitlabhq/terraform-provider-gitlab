---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "gitlab_user_impersonation_token Resource - terraform-provider-gitlab"
subcategory: ""
description: |-
  The gitlab_user_impersonation_token resource allows to manage impersonation tokens of users.
  Requires administrator access. Token values are returned once. You are only able to create impersonation tokens to impersonate the user and perform both API calls and Git reads and writes. The user can’t see these tokens in their profile settings page.
  Upstream API: GitLab REST API docs https://docs.gitlab.com/api/users/#create-an-impersonation-token
---

# gitlab_user_impersonation_token (Resource)

The `gitlab_user_impersonation_token` resource allows to manage impersonation tokens of users.
Requires administrator access. Token values are returned once. You are only able to create impersonation tokens to impersonate the user and perform both API calls and Git reads and writes. The user can’t see these tokens in their profile settings page.

**Upstream API**: [GitLab REST API docs](https://docs.gitlab.com/api/users/#create-an-impersonation-token)

## Example Usage

```terraform
resource "gitlab_user_impersonation_token" "this" {
  user_id    = 12345
  name       = "token_name"
  scopes     = ["api"]
  expires_at = "2024-08-27"
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `expires_at` (String) Expiration date of the impersonation token in ISO format (YYYY-MM-DD).
- `name` (String) The name of the impersonation token.
- `scopes` (Set of String) Array of scopes of the impersonation token. valid values are: `api`, `read_user`, `read_api`, `read_repository`, `write_repository`, `read_registry`, `write_registry`, `read_virtual_registry`, `write_virtual_registry`, `sudo`, `admin_mode`, `create_runner`, `manage_runner`, `ai_features`, `k8s_proxy`, `self_rotate`, `read_service_ping`
- `user_id` (Number) The ID of the user.

### Read-Only

- `active` (Boolean) True if the token is active.
- `created_at` (String) Time the token has been created, RFC3339 format.
- `id` (String) The ID of this Terraform resource. In the format of `<user-id>:<token-id>`.
- `impersonation` (Boolean) True as the token is always an impersonation token.
- `revoked` (Boolean) True if the token is revoked.
- `token` (String, Sensitive) The token of the user impersonation token. **Note**: the token is not available for imported resources.
- `token_id` (Number) ID of the impersonation token.

## Import

Starting in Terraform v1.5.0, you can use an [import block](https://developer.hashicorp.com/terraform/language/import) to import `gitlab_user_impersonation_token`. For example:

```terraform
import {
  to = gitlab_user_impersonation_token.example
  id = "see CLI command below for ID"
}
```

Importing using the CLI is supported with the following syntax:

```shell
# A GitLab User Impersonation Token can be imported using a key composed of `<user-id>:<token-id>`, e.g.
terraform import gitlab_user_impersonation_token.example "12345:1"

# NOTE: the `token` resource attribute is not available for imported resources as this information cannot be read from the GitLab API.
```
